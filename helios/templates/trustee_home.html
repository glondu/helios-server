{% extends "helios/templates/cryptobase.html" %}

{% block content %}
  <h2 class="title">{{election.name}} &mdash; Trustee {{trustee.name}} Home</span></h2>

<p>
{% if trustee.public_key_hash %}
You have successfully uploaded your public key.<br />
Your public key fingerprint is: <b>{{trustee.public_key_hash}}</b>.
{% else %}
<a href="{% url helios.views.trustee_keygenerator election.uuid, trustee.uuid %}">setup your key</a>
{% endif %}
</p>

{% if trustee.threshold_step == 1 %}
<p>
Proceed to <a href="{% url helios.views.trustee_step1 election.uuid, trustee.uuid %}">step 1</a> of the key generation algorithm.
</p>
{% endif %}

{% if trustee.coefficients %}
<p>You have successfully completed step 1.</p>
{% endif %}

{% if trustee.threshold_step == 2 %}
<p>
Proceed to <a href="{% url helios.views.trustee_step2 election.uuid, trustee.uuid %}">step 2</a> of the key generation algorithm.
</p>
{% endif %}

{% if trustee.acknowledgements %}
<p>You have successfully completed step 2.</p>
{% endif %}

{% if trustee.threshold_step == 3 %}
<p>
Proceed to <a href="{% url helios.views.trustee_step3 election.uuid, trustee.uuid %}">step 3</a> of the key generation algorithm.
</p>
{% endif %}

{% if trustee.public_key %}
<p>You have successfully completed step 3.</p>
{% endif %}

{% if trustee.public_key_hash and trustee.threshold_step == 0 %}
<p>Please come back here later when you are told so.</p>
{% endif %}

<p>
{% if election.encrypted_tally %}
{% if trustee.decryption_factors %}
You have successfully uploaded your decryption.
{% else %}
    The encrypted tally for this election is ready.<br />
    <a href="{% url helios.views.trustee_decrypt_and_prove election.uuid, trustee.uuid %}">decrypt with your key</a>
{% endif %}
{% else %}
Once the tally is computed, come back here to provide your secret key for decryption purposes.<br />
You should keep the email with your trustee homepage link, which contains the credentials needed to get back here.
{% endif %}
</p>



{% endblock %}
